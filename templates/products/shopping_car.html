{% extends 'home.html' %}
{% load static %}
{% block content %}
<!-- BLOQUE PRINCIPAL -->
<div class="py-5 text-center">
    <h2>{{titulo}}</h2>
</div>
<table class="table" style="width:90%">
    <thead>
        <tr>
            <th>Cantidad</th>
            <th></th>
            <th>Producto</th>
            <th>Precio Unit.</th>
            <th>Total</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for carro in ListCar %}
        <tr>
            <th>
                <input type="number" name="cantidad" id="cantidad_{{ carro.product_cars.id }}" onchange="cambiarCantidad({{ carro.product_cars.id }})" value="{{ carro.amount }}" min="1" style="width: 80px;" datapreciou="{{ carro.price }}">
            </th>
            <td><img src="{{ carro.product_cars.image.url }}" alt="{{ carro.product_cars.name }}"></td>
            <td>{{ carro.product_cars.name }}</td>
            <td>{{ carro.price }}/{{ carro.product_cars.unit }}</td>
            <td id="total_{{ carro.product_cars.id }}">${{ carro.amount * carro.price }}</td>
            <td>
                <a href="{% url 'eliminar' carro.id %}" class="btn btn-danger btn-carrito">Eliminar</a>
                <a href="{% url 'un_producto' carro.product_cars.id %}" class="btn btn-info btncarrito">Detalle</a>
            </td>
        </tr>
        {% endfor %}
        
    </tbody>
</table>
<div class="col-6 offset-4 row justify-content-center border-bottom">
<div class="col-6 text-end">
    <h6><strong> Subtotal</strong></h6>
    <h6>Iva</h6>
    <h6>Envio</h6>
    <h6><strong>A Pagar</strong></h6>
</div>
<div class="col-6 text-end">
    <h6><strong id="subtotal">${{ subtotal }}</strong></h6>
    <h6 id="iva">${{ iva }}</h6>
    <h6 id="envio">${{ envio }}</h6>
    <h6><strong id="total">${{ total }}</strong></h6>
</div>
<a href="{% url 'pay' %}" class="btn btn-info btn-carrito">Pagar</a>

</div>
<!-- FIN BLOQUE PRINCIPAL -->
{% endblock %}

{% comment %}
Aquí, en cada iteración del ciclo, estás accediendo a las propiedades del objeto 
Cars relacionado con cada producto, como el nombre ({{ carro.product_cars.name }}), 
la imagen ({{ carro.product_cars.image.url }}), la cantidad ({{ carro.amount }}) y el precio ({{ carro.price }}). 
También estás utilizando el ID del producto ({{ carro.product_cars.id }}) para identificar cada fila y hacer cálculos dinámicos. 
{% endcomment %}